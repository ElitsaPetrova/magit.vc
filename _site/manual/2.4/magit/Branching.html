<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Magit is an interface to the version control system Git, implemented
as an Emacs package.  Magit aspires to be a complete Git porcelain.
While we cannot (yet) claim that Magit wraps and improves upon each
and every Git command, it is complete enough to allow even experienced
Git users to perform almost all of their daily version control tasks
directly from within Emacs.  While many fine Git clients exist, only
Magit and Git itself deserve to be called porcelains.

Copyright (C) 2015-2016 Jonas Bernoulli <jonas@bernoul.li>

You can redistribute this document and/or modify it under the terms
of the GNU General Public License as published by the Free Software
Foundation, either version 3 of the License, or (at your option) any
later version.

This document is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details. -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Magit User Manual: Branching</title>

<meta name="description" content="Magit User Manual: Branching">
<meta name="keywords" content="Magit User Manual: Branching">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Keystroke-Index.html#Keystroke-Index" rel="index" title="Keystroke Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Manipulating.html#Manipulating" rel="up" title="Manipulating">
<link href="Merging.html#Merging" rel="next" title="Merging">
<link href="Editing-commit-messages.html#Editing-commit-messages" rel="prev" title="Editing commit messages">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="/css/page.css">


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="Branching"></a>
<div class="header">
<p>
Next: <a href="Merging.html#Merging" accesskey="n" rel="next">Merging</a>, Previous: <a href="Committing.html#Committing" accesskey="p" rel="prev">Committing</a>, Up: <a href="Manipulating.html#Manipulating" accesskey="u" rel="up">Manipulating</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Keystroke-Index.html#Keystroke-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Branching-1"></a>
<h3 class="section">6.5 Branching</h3>

<p>The upstream branch of some local branch is the branch into which the
commits on that local branch should eventually be merged, usually
something like <code>origin/master</code>.  For the <code>master</code> branch itself the
upstream branch and the branch it is being pushed to, are usually the
same remote branch.  But for a feature branch the upstream branch and
the branch it is being pushed to should differ.
</p>
<p>Feature branches too should <em>eventually</em> end up in a remote branch such
as <code>origin/master</code> or <code>origin/maint</code>.  Such a branch should therefore be
used as the upstream.  But feature branches shouldn&rsquo;t be pushed
directly to such branches.  Instead a feature branch <code>my-feature</code> is
usually pushed to <code>my-fork/my-feature</code> or <code>origin/my-feature</code>.  After the
new feature has been reviewed, the maintainer merges the feature into
<code>master</code>.  And finally <code>master</code> (not <code>my-feature</code> itself) is pushed to
<code>origin/master</code>.
</p>
<p>But new features seldom are perfect on the first try, and so feature
branches usually have to be improved and re-pushed many times.
Pushing should therefore be easy to do, and for that reason some users
have concluded that the remote branch to which a feature branch is
being pushed should be set as the upstream.  Luckily Git has long ago
gained support for a push-remote which can be configured separately
from the upstream branch, using the variables <code>branch.&lt;name&gt;.pushRemote</code>
and <code>remote.pushDefault</code>, so we no longer have to choose which of the
two remotes should be used as &quot;the remote&quot;.
</p>
<p>Each of the fetching, pulling, and pushing popups features three
commands which act on the current branch and some other branch.  Of
these, <code>p</code> is bound to a command which acts on the push-remote, <code>u</code> is
bound to a command which acts on the upstream, and <code>e</code> is bound to a
command which acts on any other branch.  The status buffer shows
unpushed and unpulled for both the push-remote and the upstream.
</p>
<p>It&rsquo;s fairly simple to configure these two remotes.  The values of all
the variables that are related to fetching, pulling, and pushing (as
well as some other branch-related variables) can be inspected and
changed in the branching popup.  It is also possible to set the
push-remote and/or upstream while pushing (see <a href="Pushing.html#Pushing">Pushing</a>).
</p>
<dl compact="compact">
<dd><a name="index-b"></a>
<a name="index-magit_002dbranch_002dpopup"></a>
</dd>
<dt><kbd>b</kbd> &nbsp;&nbsp;&nbsp;&nbsp;(<code>magit-branch-popup</code>)</dt>
<dd>
<p>This prefix command shows the following suffix commands in a popup
buffer.  It also displays the values of the following variables and
allows changing their values.
</p></dd>
</dl>

<p>The following variables are used to configure a specific branch.  The
values are being displayed for the current branch (if any).  To change
the value for another branch use a prefix argument.
</p>
<dl>
<dt><a name="index-branch_002eNAME_002emerge"></a>Variable: <strong>branch.NAME.merge</strong></dt>
<dd>
<p>Together with <code>branch.NAME.remote</code> this variable defines the upstream
branch of the local branch named NAME.  The value of this variable
is the full reference of the upstream <em>branch</em>.
</p></dd></dl>

<dl>
<dt><a name="index-branch_002eNAME_002eremote"></a>Variable: <strong>branch.NAME.remote</strong></dt>
<dd>
<p>Together with <code>branch.NAME.merge</code> this variable defines the upstream
branch of the local branch named NAME.  The value of this variable
is the name of the upstream <em>remote</em>.
</p></dd></dl>

<dl>
<dt><a name="index-branch_002eNAME_002erebase"></a>Variable: <strong>branch.NAME.rebase</strong></dt>
<dd>
<p>This variable controls whether pulling into the branch named NAME is
done by rebasing or by merging the fetched branch.
</p>
<ul>
<li> When <code>true</code> then pulling is done by rebasing.

</li><li> When <code>false</code> then pulling is done by merging.

</li><li> When undefined then the value of <code>pull.rebase</code> is used.  The default
of that variable is <code>false</code>.
</li></ul>
</dd></dl>

<dl>
<dt><a name="index-branch_002eNAME_002epushRemote"></a>Variable: <strong>branch.NAME.pushRemote</strong></dt>
<dd>
<p>This variable specifies the remote that the branch named NAME is
usually pushed to.  The value has to be the name of an existing
remote.
</p>
<p>It is not possible to specify the name of <em>branch</em> to push the local
branch to.  The name of the remote branch is always the same as the
name of the local branch.
</p>
<p>If this variable is undefined but <code>remote.pushDefault</code> is defined,
then the value of the latter is used.  By default <code>remote.pushDefault</code>
is undefined.
</p></dd></dl>

<dl>
<dt><a name="index-branch_002eNAME_002edescription"></a>Variable: <strong>branch.NAME.description</strong></dt>
<dd>
<p>This variable can be used to describe the branch named NAME.  That
description is used e.g. when turning the branch into a series of
patches.
</p></dd></dl>

<p>The following variables specify defaults which are used if the above
branch-specific variables are not set.
</p>
<dl>
<dt><a name="index-pull_002erebase"></a>Variable: <strong>pull.rebase</strong></dt>
<dd>
<p>This variable specifies whether pulling is done by rebasing or by
merging.  It can be overwritten using <code>branch.NAME.rebase</code>.
</p>
<ul>
<li> When <code>true</code> then pulling is done by rebasing.

</li><li> When <code>false</code> (the default) then pulling is done by merging.
</li></ul>
<p>Since it is never a good idea to merge the upstream branch into a
feature or hotfix branch and most branches are such branches, you
should consider setting this to <code>true</code>, and <code>branch.master.rebase</code> to
<code>false</code>.
</p></dd></dl>

<dl>
<dt><a name="index-remote_002epushDefault"></a>Variable: <strong>remote.pushDefault</strong></dt>
<dd>
<p>This variable specifies what remote the local branches are usually
pushed to.  This can be overwritten per branch using
<code>branch.NAME.pushRemote</code>.
</p></dd></dl>

<p>The following variables are used during the creation of a branch and
control whether the various branch-specific variables are
automatically set at this time.
</p>
<dl>
<dt><a name="index-branch_002eautoSetupMerge"></a>Variable: <strong>branch.autoSetupMerge</strong></dt>
<dd>
<p>This variable specifies under what circumstances creating a branch
NAME should result in the variables <code>branch.NAME.merge</code> and
<code>branch.NAME.remote</code> being set according to the starting point used to
create the branch.  If the starting point isn&rsquo;t a branch, then these
variables are never set.
</p>
<ul>
<li> When <code>always</code> then the variables are set regardless of whether the
starting point is a local or a remote branch.

</li><li> When <code>true</code> (the default) then the variables are set when the starting
point is a remote branch, but not when it is a local branch.

</li><li> When <code>false</code> then the variables are never set.
</li></ul>
</dd></dl>

<dl>
<dt><a name="index-branch_002eautoSetupRebase"></a>Variable: <strong>branch.autoSetupRebase</strong></dt>
<dd>
<p>This variable specifies whether creating a branch NAME should result
in the variable <code>branch.NAME.rebase</code> being set to <code>true</code>.
</p>
<ul>
<li> When <code>always</code> then the variable is set regardless of whether the
starting point is a local or a remote branch.

</li><li> When <code>local</code> then the variable are set when the starting point is a
local branch, but not when it is a remote branch.

</li><li> When <code>remote</code> then the variable are set when the starting point is a
remote branch, but not when it is a local branch.

</li><li> When <code>never</code> (the default) then the variable is never set.
</li></ul>
</dd></dl>

<p>Note that the respective commands always change the repository-local
values.  If you want to change the global value, which is used when
the local value is undefined, then you have to do so on the command
line, e.g.:
</p>
<div class="example">
<pre class="example">git config --global remote.autoSetupMerge always
</pre></div>

<p>For more information about these variables you should also see
</p>
the <a href="http://git-scm.com/docs/git-config">git-config(1)</a> manpage<p>.  Also see 
the <a href="http://git-scm.com/docs/git-branch">git-branch(1)</a> manpage,
</p>
the <a href="http://git-scm.com/docs/git-checkout">git-checkout(1)</a> manpage<p>, and <a href="Pushing.html#Pushing">Pushing</a>.
</p>
<dl compact="compact">
<dd><a name="index-b-b"></a>
<a name="index-magit_002dcheckout"></a>
</dd>
<dt><kbd>b b</kbd> &nbsp;&nbsp;&nbsp;&nbsp;(<code>magit-checkout</code>)</dt>
<dd>
<p>Checkout a revision read in the minibuffer and defaulting to the
branch or arbitrary revision at point.  If the revision is a local
branch then that becomes the current branch.  If it is something
else then <code>HEAD</code> becomes detached.  Checkout fails if the working tree
or the staging area contain changes.
</p>
<a name="index-b-n"></a>
<a name="index-magit_002dbranch"></a>
</dd>
<dt><kbd>b n</kbd> &nbsp;&nbsp;&nbsp;&nbsp;(<code>magit-branch</code>)</dt>
<dd>
<p>Create a new branch.  The user is asked for a branch or arbitrary
revision to use as the starting point of the new branch.  When a
branch name is provided, then that becomes the upstream branch of
the new branch.  The name of the new branch is also read in the
minibuffer.
</p>
<p>Also see option <code>magit-branch-prefer-remote-upstream</code>.
</p>
<a name="index-b-c"></a>
<a name="index-magit_002dbranch_002dand_002dcheckout"></a>
</dd>
<dt><kbd>b c</kbd> &nbsp;&nbsp;&nbsp;&nbsp;(<code>magit-branch-and-checkout</code>)</dt>
<dd>
<p>This command creates a new branch like <code>magit-branch</code>, but then also
checks it out.
</p>
<p>Also see option <code>magit-branch-prefer-remote-upstream</code>.
</p>
<a name="index-b-s"></a>
<a name="index-magit_002dbranch_002dspinoff"></a>
</dd>
<dt><kbd>b s</kbd> &nbsp;&nbsp;&nbsp;&nbsp;(<code>magit-branch-spinoff</code>)</dt>
<dd>
<p>This command creates and checks out a new branch starting at and
tracking the current branch.  That branch in turn is reset to the
last commit it shares with its upstream.  If the current branch has
no upstream or no unpushed commits, then the new branch is created
anyway and the previously current branch is not touched.
</p>
<p>This is useful to create a feature branch after work has already
began on the old branch (likely but not necessarily &quot;master&quot;).
</p>
<p>If the current branch is a member of the value of option
<code>magit-branch-prefer-remote-upstream</code> (which see), then the current
branch will be used as the starting point as usual, but the upstream
of the starting-point may be used as the upstream of the new branch,
instead of the starting-point itself.
</p>
<a name="index-b-x"></a>
<a name="index-magit_002dbranch_002dreset"></a>
</dd>
<dt><kbd>b x</kbd> &nbsp;&nbsp;&nbsp;&nbsp;(<code>magit-branch-reset</code>)</dt>
<dd>
<p>This command resets a branch, defaulting to the branch at point, to
the tip of another branch or any other commit.
</p>
<p>When resetting to another branch, then that branch is also set as
the upstream of the branch being reset.
</p>
<p>When the branch being reset is the current branch, then a hard reset
is performed.  If there are any uncommitted changes, then the user
has to confirming the reset because those changes would be lost.
</p>
<p>This is useful when you have started work on a feature branch but
realize it&rsquo;s all crap and want to start over.
</p>
<a name="index-b-d"></a>
<a name="index-magit_002dbranch_002ddelete"></a>
</dd>
<dt><kbd>b d</kbd> &nbsp;&nbsp;&nbsp;&nbsp;(<code>magit-branch-delete</code>)</dt>
<dd>
<p>Delete one or multiple branches.  If the region marks multiple
branches, then offer to delete those.  Otherwise, prompt for a single
branch to be deleted, defaulting to the branch at point.
</p>
<a name="index-b-r"></a>
<a name="index-magit_002dbranch_002drename"></a>
</dd>
<dt><kbd>b r</kbd> &nbsp;&nbsp;&nbsp;&nbsp;(<code>magit-branch-rename</code>)</dt>
<dd>
<p>Rename a branch.  The branch and the new name are read in the
minibuffer.  With prefix argument the branch is renamed even if that
name conflicts with an existing branch.
</p>
</dd>
</dl>

<dl>
<dt><a name="index-magit_002dbranch_002dread_002dupstream_002dfirst"></a>User Option: <strong>magit-branch-read-upstream-first</strong></dt>
<dd>
<p>When creating a branch, whether to read the upstream branch before
the name of the branch that is to be created.  The default is <code>nil</code>,
and I recommend you leave it at that.
</p></dd></dl>

<dl>
<dt><a name="index-magit_002dbranch_002dprefer_002dremote_002dupstream"></a>User Option: <strong>magit-branch-prefer-remote-upstream</strong></dt>
<dd>
<p>This option specifies whether remote upstreams are favored over
local upstreams when creating new branches.
</p>
<p>When a new branch is created, Magit offers the branch, commit, or
stash as the default starting point of the new branch.  If there is
no such thing at point, then it falls back to offer the current
branch as starting-point.  The user may then accept that default or
pick something else.
</p>
<p>If the chosen starting-point is a branch, then it may also be set
as the upstream of the new branch, depending on the value of the
Git variable &lsquo;branch.autoSetupMerge&rsquo;.  By default this is done
for remote branches, but not for local branches.
</p>
<p>You might prefer to always use some remote branch as upstream.
If the chosen starting-point is (1) a local branch, (2) whose
name is a member of the value of this option, (3) the upstream of
that local branch is a remote branch with the same name, and (4)
that remote branch can be fast-forwarded to the local branch,
then the chosen branch is used as starting-point, but its own
upstream is used as the upstream of the new branch.
</p>
<p>Assuming the chosen branch matches these conditions you would end
up with with e.g.:
</p>
<div class="example">
<pre class="example">feature --upstream--&gt; origin/master
</pre></div>

<p>instead of
</p>
<div class="example">
<pre class="example">feature --upstream--&gt; master --upstream--&gt; origin/master
</pre></div>

<p>Which you prefer is a matter of personal preference.  If you do
prefer the former, then you should add branches such as <code>master</code>,
<code>next</code>, and <code>maint</code> to the value of this options.
</p></dd></dl>

<hr>
<div class="header">
<p>
Next: <a href="Merging.html#Merging" accesskey="n" rel="next">Merging</a>, Previous: <a href="Committing.html#Committing" accesskey="p" rel="prev">Committing</a>, Up: <a href="Manipulating.html#Manipulating" accesskey="u" rel="up">Manipulating</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Keystroke-Index.html#Keystroke-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
